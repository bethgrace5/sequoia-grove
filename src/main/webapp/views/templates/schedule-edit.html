
<div class="well well-sm schedule-console">
  <div class="row">
    <div class="col-sm-2">
      <ul data-as-sortable="gapDragControlListeners" data-ng-model="items">
        <li data-ng-repeat="item in items" data-as-sortable-item>
        <!-- Spacers active -->
          <div data-as-sortable-item-handle ng-hide="hideSpacers" >
            <button type="button" style="cursor:inherit" class="btn btn-info position-button"
              ng-click="toggleHideSpacers();">
              <!--ng-click="template.unshift({'isSpacer':true})"-->
              <span class="glyphicon glyphicon-move" aria-hidden="true"> </span>
              spacer on
            </button>
          </div>
          <!-- Spacers inactive -->
          <div ng-show="hideSpacers" >
            <button type="button" style="cursor:inherit" class="btn btn-default position-button"
              ng-click="toggleHideSpacers();">
              <!--ng-click="template.unshift({'isSpacer':true})"-->
              <span class="glyphicon glyphicon-move" aria-hidden="true"> </span>
              spacer off
            </button>
          </div>
        </li>
      </ul>
    </div>
    <div class="col-sm-2">
      <!-- Filter/ Narrow Schedule by location/shift -->
      <div class="position-button-bar">
        <!-- Filter by Position -->
        <div class="dropdown pull-left" dropdown is-open=true>
          <button type="button"
            id="selectPosition"
            class="btn btn-primary position-button"
            data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="true">
            {{selectedPosition}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" rol="menu" arial-labelledby="selectPosition">
            <li role="menuitem"><a ng-click="selectPosition(0, 'all')">All</a></li>
            <li ng-repeat = "pos in positions" value ="pos.title">
            <a ng-click="selectPosition(pos.id, pos.title)">{{pos.title}}</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-sm-8" >
      <div ng-hide="errors.available && errors.hasPosition && errors.isCurrent">

        <!-- Error messages -->
        <strong style="color: #9900cc">{{errors.selectedName}}</strong>

        <!-- Not Available -->
          <span ng-hide="errors.available">
            is
            <span style="color:#b30086"> not available</span><span ng-hide="errors.hasPosition || errors.isCurrent">,</span>
            <span ng-hide="errors.hasPosition && errors.isCurrent">
              <span ng-show="errors.hasPosition || errors.isCurrent"> and </span>
            </span>
          </span>

        <!-- Does not have position-->
          <span ng-hide="errors.hasPosition">
            does not have the position
            <span style="color:#b30086"> {{errors.selectedPosition}}</span>
            <span ng-hide="errors.isCurrent"> and </span>
        </span>

        <!-- is not current -->
        <span ng-hide="errors.isCurrent">
          is not a
          <span style="color:#b30086"> current </span>
          employee
        </span>

      </div>
    </div>
  </div>
</div>

<!-- scrollable view -->
<div class="data-view">
  <!-- shifts -->
  <ul id="board" data-as-sortable="boardDragControlListeners" data-ng-model="template">
  <li data-ng-repeat="(key,value) in template" data-as-sortable-item ng-show="filterSchedule(value.pid)">
    <div class="row">
      <!-- ng-show="filterByType(t.location, t.position, user.firstname, t.mon, t.tue, t.wed, t.thu, t.fri, t.sat, t.sun)" -->

      <!-- Spacer -->
      <div data-as-sortable-item-handle>
        <div class="col-sm-2 schedule-edit-task-names">
          <span ng-click="selectPosition(value.pid, value.position)">{{value.tname}}</span>
          <div ng-hide="hideSpacers">
            <div ng-show="value.isSpacer">
              <button type="button" style="cursor:inherit;" class="btn btn-info position-button" >
                <span class="glyphicon glyphicon-move" aria-hidden="true"> </span>
                Spacer
              </button>
              <span style="margin-left:15px; cursor:pointer;" class="glyphicon glyphicon-remove" aria-hidden="true" ng-click="template.splice($index, 1)"></span>
            </div>
          </div>
        </div>

    <!-- weekday times -->
        <div class="col-sm-1 schedule-times">
          <div ng-hide="value.isSpacer">
            {{formatTime(value.weekdayStart, false)}} - {{formatTime(value.weekdayEnd, false)}}
          </div>
        </div>
      </div>

      <div ng-hide="value.isSpacer">
        <!-- Monday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.mon.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.mon.val}}
          day="mon"
          shiftStart={{value.weekdayStart}}
          shiftEnd={{value.weekdayEnd}}
          ng-click="selectEid(value, 'mon', value.mon.hasAvailability, value.mon.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.mon.eid, value.sid, value.mon.hasAvailability, value.mon.hasPosition, value.mon.holiday, value.mon.isCurrent)"
          ng-model="value.mon.name">
        </div>

        <!-- Tuesday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.tue.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.tue.val}}
          day="tue"
          shiftStart={{value.weekdayStart}}
          shiftEnd={{value.weekdayEnd}}
          ng-click="selectEid(value, 'tue', value.tue.hasAvailability, value.tue.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.tue.eid, value.sid, value.tue.hasAvailability, value.tue.hasPosition, value.tue.holiday, value.tue.isCurrent)"
          ng-model="value.tue.name">
        </div>

        <!-- Wednesday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.wed.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.wed.val}}
          day="wed"
          shiftStart={{value.weekdayStart}}
          shiftEnd={{value.weekdayEnd}}
          ng-click="selectEid(value, 'wed', value.wed.hasAvailability, value.wed.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.wed.eid, value.sid, value.wed.hasAvailability, value.wed.hasPosition, value.wed.holiday, value.wed.isCurrent)"
          ng-model="value.wed.name">
        </div>

        <!-- Thursday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.thu.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.thu.val}}
          day="thu"
          shiftStart={{value.weekdayStart}}
          shiftEnd={{value.weekdayEnd}}
          ng-click="selectEid(value, 'thu', value.thu.hasAvailability, value.thu.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.thu.eid, value.sid, value.thu.hasAvailability, value.thu.hasPosition, value.thu.holiday, value.thu.isCurrent)"
          ng-model="value.thu.name">
        </div>

        <!-- Friday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.fri.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.fri.val}}
          day="fri"
          shiftStart={{value.weekdayStart}}
          shiftEnd={{value.weekdayEnd}}
          ng-click="selectEid(value, 'fri', value.fri.hasAvailability, value.fri.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.fri.eid, value.sid, value.fri.hasAvailability, value.fri.hasPosition, value.fri.holiday, value.fri.isCurrent)"
          ng-model="value.fri.name">
        </div>

    <!-- weekend times -->
        <div class="col-sm-1 col-sm-offset-0 schedule-times" >
          {{formatTime(value.weekendStart, false)}} - {{formatTime(value.weekendEnd, false)}}
        </div>

        <!-- Saturday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.sat.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.sat.val}}
          day="sat"
          shiftStart={{value.weekendStart}}
          shiftEnd={{value.weekendEnd}}
          ng-click="selectEid(value, 'sat', value.sat.hasAvailability, value.sat.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.sat.eid, value.sid, value.sat.hasAvailability, value.sat.hasPosition, value.sat.holiday, value.sat.isCurrent)"
          ng-model="value.sat.name">
        </div>

        <!-- Sunday -->
        <div class="col-sm-1 col-sm-offset-0  schedule-edit">
          <input select-on-click
          eid={{value.sun.eid}}
          pid={{value.pid}}
          sid={{value.sid}}
          idx={{$index}}
          date={{date.sun.val}}
          day="sun"
          shiftStart={{value.weekendStart}}
          shiftEnd={{value.weekendEnd}}
          ng-click="selectEid(value, 'sun', value.sat.hasAvailability, value.sat.hasPosition)"
          type="text"
          ng-disabled="saving"
          ng-class="inputStatus(value.sun.eid, value.sid, value.sun.hasAvailability, value.sun.hasPosition, value.sun.holiday, value.sun.isCurrent)"
          ng-model="value.sun.name">
        </div>
      </div>

    </div>
  </li>
  </ul>
</div>

